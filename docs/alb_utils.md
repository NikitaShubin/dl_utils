# Модуль [`alb_utils.py`](https://github.com/NikitaShubin/dl_utils/blob/main/alb_utils.py "Перейти к модулю")

Содержит специализированные классы для работы с библиотекой albumentations, предоставляющие:
- кастомные аугментации изображений;
- гибкие обертки для преобразований;
- удобные интерфейсы для работы с изображениями и масками.

---

## Основные компоненты

### Класс RandomDust

Наследуется от `A.RandomFog` и реализует эффект пылевой взвеси.

#### Ключевые особенности:
- **настройка цвета** - через параметр `color` (по умолчанию белый);
- **отличие от RandomFog**:
  - не производит размытия изображения;
  - добавляет равномерный полупрозрачный слой заданного цвет;
  - создает маску пыли с альфа-каналом;
  - заполняет цветовые каналы согласно параметру `color`;
  - накладывает маску на изображение через `overlap_with_alpha`.

#### Параметры
| Параметр    | Значение<br/>по умолчанию | Назначение                     |
|-------------|---------------------------|--------------------------------|
| `fog_coef`  | 0.1                       | коэффициент интенсивности пыли |
| `haze_list` | None                      | параметры генерации дымки      |

### Класс AlbTransforms
Универсальная обертка для преобразований albumentations.

#### Функциональность:
- **гибкая инициализация** принимает:
  - одиночные преобразования (функторы);
  - последовательности преобразований;
  - None (отсутствие преобразований).
- **автоматическая композиция** преобразований через `A.Compose`;
- **поддержка пар image-mask** через метод `image_mask_func`.

#### Основные методы
| Метод                  | Назначение                                                                                                                                          |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| `compose_transforms()` | обрабатывает одиночные преобразования и их последовательности;<br/>поддерживает режим возврата None или функции-заглушки.                           |
| `image_mask_func()`    | специализированный интерфейс для одновременной обработки изображений и масок;<br/>возвращает кортеж (обработанное изображение, обработанная маска). |
| `__call__()`           | делает экземпляр класса вызываемым, применяя заданные преобразования                                                                                |
