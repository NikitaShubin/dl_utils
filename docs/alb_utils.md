# Модуль [`alb_utils.py`](../alb_utils.py)

Содержит специализированные классы для работы с библиотекой albumentations,
предоставляющие:

- кастомные аугментации изображений;
- гибкие обертки для преобразований;
- удобные интерфейсы для работы с изображениями и масками.

---

## Основные компоненты

### Класс RandomDust

Наследуется от `A.RandomFog` и реализует эффект пылевой взвеси.

#### Ключевые особенности

- **настройка цвета** - через параметр `color` (по умолчанию белый);
- **отличие от RandomFog**:
  - не производит размытия изображения;
  - добавляет равномерный полупрозрачный слой заданного цвета;
  - создает маску пыли с альфа-каналом;
  - заполняет цветовые каналы согласно параметру `color`;
  - накладывает маску на изображение через `overlap_with_alpha`.

#### Параметры RandomDust

| Параметр    | Значение | Назначение                     |
|-------------|----------|--------------------------------|
| `fog_coef`  | 0.1      | коэффициент интенсивности пыли |
| `haze_list` | None     | параметры генерации дымки      |

### Класс AlbTransforms

Универсальная обертка для преобразований albumentations.

#### Функциональность

- **гибкая инициализация** принимает:
  - одиночные преобразования (функторы);
  - последовательности преобразований;
  - None (отсутствие преобразований).
- **автоматическая композиция** преобразований через `A.Compose`;
- **поддержка пар image-mask** через метод `image_mask_func`.

#### Основные методы AlbTransforms
<!-- markdownlint-disable MD013 -->
| Метод                  | Назначение                                                                    |
|------------------------|-------------------------------------------------------------------------------|
| `compose_transforms()` | Обрабатывает одиночные преобразования и их последовательности.                |
| `image_mask_func()`    | Специализированный интерфейс для одновременной обработки изображений и масок. |
| `__call__()`           | Делает экземпляр класса вызываемым, применяя заданные преобразования.         |
<!-- markdownlint-enable MD013 -->

**Примечание:** `compose_transforms()` поддерживает режим возврата None или
функции-заглушки. `image_mask_func()` возвращает кортеж (обработанное изображение,
обработанная маска).
