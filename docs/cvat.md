# Модуль обработки датасетов CVAT [`cvat.py`](https://github.com/NikitaShubin/dl_utils/blob/main/cvat.py "Перейти к модулю")

Предоставляет комплекс инструментов для работы с датасетами CVAT (Computer Vision Annotation Tool). Реализованы функции чтения, обработки, преобразования и визуализации данных разметки с особым акцентом на полигональные аннотации как наиболее универсальный формат.

---

## Основные возможности

### Базовые функции:
- **чтение данных**: парсинг бекапов CVAT и извлечение данных разметки;
- **интерполяция**: автоматическое заполнение промежуточных кадров между ключевыми аннотациями;
- **разделение сцен**: разбиение последовательностей по меткам "scene-start" и "scene-finish";
- **преобразование форматов**: конвертация между CVAT, YOLO и другими форматами;
- **визуализация**: генерация размеченных кадров и видео-превью.

---

## Основные компоненты

### Классы
| Класс        | Описание                                                           |
|--------------|--------------------------------------------------------------------|
| `CVATPoints` | инкапсуляция аннотаций объектов с геометрическими преобразованиями |
| `CVATLabels` | управление метками классов и их свойствами визуализации            |
| `Triangle`   | вспомогательный класс для расчетов площади/центра полигонов        |

### Ключевые функции
| Функция                | Назначение                                                    |
|------------------------|---------------------------------------------------------------|
| `cvat_backups2tasks()` | полный цикл обработки от сырых данных до организованных задач |
| `interpolate_df()`     | создание промежуточных кадров между ключевыми аннотациями     |
| `subtask2xml()`        | экспорт аннотаций в XML-формат, совместимый с CVAT            |
| `tasks2preview()`      | генерация видео-превью размеченных последовательностей        |

---

## Обработка данных:
- **парсинг**: извлечение задач из бекапов CVAT;
- **очистка**: удаление дублирующихся аннотаций;
- **интерполяция**: заполнение промежутков между ключевыми кадрами;
- **сегментация сцен**: разделение на логические сцены;
- **постобработка**: оптимизация представления полигонов.

---

## Поддерживаемые типы разметки:
- полигоны;
- прямоугольники (bounding boxes);
- эллипсы;
- полилинии;
- точечные метки.
