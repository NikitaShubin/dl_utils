# Модуль `yolo.py`

Модуль `yolo.py` предназначен для конвертации задач разметки в формат YOLO-датасета.
Основные функции включают:
- Формирование статистики по данным
- Разделение на обучающую/валидационную/тестовую выборки
- Генерацию YAML-файлов конфигурации
- Сохранение данных в YOLO-формате

Основные зависимости:
- OpenCV (`cv2`) для работы с изображениями
- Pandas (`pd`) для обработки табличных данных
- NumPy (`np`) для численных операций
- Вспомогательные модули (`cvat`, `copybal`, `utils`)

## Основные компоненты

### Класс YOLOLabels
- **Назначение**: Хранение и обработка разметки одного изображения в YOLO-формате
- **Поддерживаемые режимы**:
  - `box` - bounding boxes
  - `seg` - сегментация
- **Основные методы**:
  - `apply_label_func` - преобразование меток
  - `save` - сохранение в файл
  - `draw_labels` - визуализация разметки на изображении

### Функции обработки данных

#### Статистика
1. **`df2statistic`**:
   - Сбор статистики по датафрейму
   - Учёт уникальных объектов в видеопоследовательностях

2. **`tasks2statistic`**:
   - Агрегация статистики по списку задач
   - Поддержка параллельной обработки

3. **`class_statistic2superclass_statistic`**:
   - Агрегация статистики классов в суперклассы

#### Разделение данных
- **`sources2statistic_and_train_val_test_tasks`**:
  - Разделение данных на train/val/test
  - Генерация статистики для каждой выборки
  - Сохранение статистики в различных форматах (CSV, Excel, PNG)

### Генерация YOLO-датасета

#### Конфигурация
- **`gen_yaml`**:
  - Создание YAML-файла конфигурации датасета
  - Включает пути к данным и словарь классов

#### Основные функции преобразования
1. **`task2yolo`**:
   - Конвертация отдельной задачи в YOLO-формат
   - Поддержка:
     - Масштабирования изображений
     - Разделения на тайлы
     - Балансировки классов

2. **`tasks2yolo`**:
   - Пакетная обработка списка задач
   - Параллельное выполнение
   - Поддержка копирующей балансировки

### Особенности обработки
- Поддержка различных источников данных (CVAT, CG и др.)
- Гибкое управление масштабированием и разделением изображений
- Визуализация результатов разметки
- Сохранение метаинформации в превью
- Поддержка различных форматов выходных данных

## Вспомогательные функции
- Обработка цветовых пространств
- Работа с файловой системой
- Параллельная обработка данных
- Визуализация статистики

## Форматы данных
- **Входные**: CVAT-разметка, изображения, видео
- **Выходные**: YOLO-формат (изображения + текстовые файлы разметки), статистика в CSV/Excel/PNG, YAML-конфиги