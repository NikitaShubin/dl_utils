# Модуль [`tresh.py`](https://github.com/NikitaShubin/dl_utils/blob/main/tresh.py "Перейти к модулю")

Реализует визуализацию оптического потока из видеопотока с возможностью интерактивного управления. 
Основные функции включают:
- вычисление плотного оптического потока (метод Farneback);
- различные варианты визуализации потока;
- эффект "глитча" на основе warp-преобразования.

Код использует библиотеки:
- OpenCV (`cv2`) для обработки видео и вычисления оптического потока;
- NumPy (`np`) для работы с массивами;
- вспомогательный модуль `video` для захвата видеопотока.

---

## Основные функции визуализации

| Функция     | Назначение                                                    |
|-------------|---------------------------------------------------------------|
| `draw_flow` | визуализирует оптический поток в виде векторов на изображении |
| `draw_hsv`  | преобразует оптический поток в цветовое HSV-представление     |
| `warp_flow` | применяет обратное преобразование потока к изображению        |

### Особенности функций

### `draw_flow`:
  - рисует стрелки потока с фиксированным шагом (`step`);
  - отображает начальные точки векторов кружками;
  - использует зелёный цвет для элементов визуализации.

### `draw_hsv`:
Параметры кодировки:
  - оттенок (H) - направление потока;
  - насыщенность (S) - максимальная (255);
  - яркость (V) - величина потока (ограничена до 255).

### `warp_flow`:
создает эффект "глитча" путем искажения предыдущего кадра.

---

## Работа с видеопотоком:
- поддержка различных источников видео (файл или камера);
- интерактивное управление через клавиши:
  - `1` - переключение HSV-визуализации;
  - `2` - переключение эффекта "глитча";
  - `ESC` - выход из программы.