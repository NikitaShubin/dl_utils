# Модуль `tresh.py`

## Общее описание
Модуль `tresh.py` реализует визуализацию оптического потока из видеопотока с возможностью интерактивного управления. Основные функции включают:
- Вычисление плотного оптического потока (метод Farneback)
- Различные варианты визуализации потока
- Эффект "глитча" на основе warp-преобразования

Код использует библиотеки:
- OpenCV (`cv2`) для обработки видео и вычисления оптического потока
- NumPy (`np`) для работы с массивами
- Вспомогательный модуль `video` для захвата видеопотока

## Основные функции визуализации

### `draw_flow`
- Визуализирует оптический поток в виде векторов на изображении
- Особенности:
  - Рисует стрелки потока с фиксированным шагом (`step`)
  - Отображает начальные точки векторов кружками
  - Использует зелёный цвет для элементов визуализации

### `draw_hsv`
- Преобразует оптический поток в цветовое HSV-представление
- Параметры кодировки:
  - Оттенок (H) - направление потока
  - Насыщенность (S) - максимальная (255)
  - Яркость (V) - величина потока (ограничена до 255)

### `warp_flow`
- Применяет обратное преобразование потока к изображению
- Создает эффект "глитча" путем искажения предыдущего кадра

## Работа с видеопотоком
- Поддержка различных источников видео (файл или камера)
- Интерактивное управление через клавиши:
  - `1` - переключение HSV-визуализации
  - `2` - переключение эффекта глитча
  - `ESC` - выход из программы

## Особенности обработки
- Автоматическое преобразование кадров в градации серого
- Использование алгоритма Farneback для плотного оптического потока
- Реализация устойчивого отображения при различных разрешениях

## Зависимости
- Основные: `cv2`, `numpy`
- Вспомогательные: `video`, `sys`
